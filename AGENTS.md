## Codex / AI Agent 工作约定（仓库根作用域）

本文件为本仓库中所有 AI 助手（包括 Codex CLI、GPT 等）工作的约定和流程规范。该文件位于仓库根目录，作用范围为整个项目。

### 1. 思考流程约定

- 每次有「新的需求 / 请求」进入时，AI 必须先执行两步思考，再进行任何代码或配置改动：
  - 使用 Context7：调用 Context7 的库解析与文档工具（`resolve-library-id` + `get-library-docs`），检索与当前任务最相关的技术 / 库 / 实践，用于补充上下文。
  - 使用「思考MCP」：调用思考MCP（`sequentialthinking`）对当前任务进行显式推理，给出步骤规划或设计思路，然后再开始具体操作。
- 如果任务非常简单（例如只读说明、不改代码），可以只用思考MCP 给出推理结论，但默认仍建议执行 Context7 + 思考MCP 组合。

### 2. Git 使用与提交流程

- 仓库必须是一个已初始化的 Git 仓库（`git init` 已执行）。
- 每一轮「实质性的代码或配置修改」完成后，AI 必须执行一轮 Git 提交流程，包含至少：
  - `git status` 检查变更；
  - `git add <files>` 将相关文件加入暂存区；
  - `git commit -m "<简洁、语义化的提交信息>"` 完成提交。
- **在本仓库中，AI 助手应尽量做到：每次完成一轮文件修改（无论是代码、配置还是文档），都及时执行上述 Git 提交流程，并在提交信息中明确说明「这次改了什么、加了什么」**。
- 在开始下一轮修改之前，应确保工作区干净或只包含当前轮的修改，避免长期堆积未提交更改。
- 提交信息应尽量体现本轮修改的目的，例如：
  - `chore: init repo`
  - `docs: add AGENTS guidelines`
  - `feat: add section writer API`

### 3. 文件与范围说明

- 本 AGENTS 说明作用范围：仓库根目录及其所有子目录。
- 若后续在子目录中创建新的 AGENTS.md，则子目录中的文件应遵循该子目录的 AGENTS 规则优先，其次再遵守本文件的全局规则。

### 4. 后续扩展占位

- 将来如引入本地后端、MCP Server 或多 Agent 协作框架，应在本文件中补充：
  - 后端代码的目录结构与职责边界。
  - 各 Agent / 工具的职责描述与调用约定。
  - 与合规 / 审计相关的额外约束（例如数据脱敏、日志记录策略等）。

